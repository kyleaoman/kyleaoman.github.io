<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Visualisation | Kyle Oman</title> <meta name="author" content="Kyle Oman"> <meta name="description" content="rendering simulated galaxies for science &amp; enjoyment"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%8C&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kyleaoman.github.io/projects/vis/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script type="text/javascript">gcal$perf$serverTime=103,gcal$perf$headStartTime=(new Date).getTime();</script> <script type="text/javascript">function _DumpException(o){throw o}var baseModuleLoaded_=!1;</script> <script type="text/javascript" src="https://calendar.google.com/calendar/_/web/calendar-static/_/js/k=calendar-web.embed.en.fUg31ZwIpkY.2020.O/d=1/rs=ABFko3_CKdJRu7KBLjb3yN60zho6OQs2SA/m=embed"></script> <script type="text/javascript">if(!baseModuleLoaded_){var loadErrorXhr=new XMLHttpRequest;loadErrorXhr.open("POST","https://www.google.com/calendar/u/0/bmlf"),loadErrorXhr.send()}</script> <script>function _onload(){window._init({features:[],loggedin:!0,cids:{"kyleaoman@gmail.com":{color:"#039BE5",access:20,title:"kyleaoman@gmail.com"},"13addb9c69e03eb30b7542760c70e2510c214407750dd0d4e96f051e0b97183e@group.calendar.google.com":{color:"#E4C441",access:20,title:"Astronomy Activities Durham"},"th0ltkip2416tfqd9u2e8dbdic@group.calendar.google.com":{color:"#E4C441",access:20,title:"Astronomy Seminars Durham"},"ibsdffosoi1stsdl259hr9h984@group.calendar.google.com":{color:"#E4C441",access:20,title:"Durham Friday Lunch Astronomy Talk"}},view:"agenda",weekstart:0,format24hour:!0,dateFieldOrder:1,preloadStart:"20230906",preloadEnd:"20231007",container:"container",baseUrl:"/",imagePath:"//calendar.google.com/googlecalendar/images/",timezone:"Europe/London",timezoneLocalized:"United Kingdom Time",timezoneOffsetMs:36e5,nowMs:"1694084369595",timezoneNextTransitionMs:"1698541200000",timezoneNextOffsetMs:0,showNavigation:!0,showDateMarker:!0,showTabs:!1,showCalendarMenu:!1,showCurrentTime:!0,showTz:!0,showPrintButton:!1,showElementsLogo:!1,showSubscribeButton:!1,embedStyle:"WyJhdDplbWI6c3QiXQ==",proxyUrl:"https://clients6.google.com",calendarApiVersion:"v3",developerKey:"AIzaSyBNlYH01_9Hc5S1J9vuFmu2nUqBZJNAXxs"})}</script> <script type="text/javascript">function clientLibraryLoaded(){clientLibraryLoaded_=!0,pageLoaded_&&baseModuleLoaded_&&_onload()}function pageLoaded(){pageLoaded_=!0,clientLibraryLoaded_&&baseModuleLoaded_&&_onload()}var pageLoaded_=!1,clientLibraryLoaded_=!1;</script> <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=clientLibraryLoaded"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Kyle </span>Oman</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">research</a> </li> <li class="nav-item "> <a class="nav-link" href="/group/">group</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">code</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/calendar/">calendar</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Visualisation</h1> <p class="post-description">rendering simulated galaxies for science &amp; enjoyment</p> </header> <article> <div id="table-of-contents"> <h2>Contents</h2> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"> <a href="#rendering-hydrodynamical-simulations">Rendering hydrodynamical simulations</a> <ul> <li class="toc-entry toc-h3"><a href="#early-attempts">Early attempts</a></li> <li class="toc-entry toc-h3"> <a href="#visualisation-driven-science">Visualisation-driven science</a> <ul> <li class="toc-entry toc-h4"><a href="#embedding-an-mp4-in-a-pdf-file">Embedding an mp4 in a pdf file</a></li> </ul> </li> <li class="toc-entry toc-h3"><a href="#non-density-rendering">Non-density rendering</a></li> </ul> </li> <li class="toc-entry toc-h2"><a href="#radio-datacube-visualisation">Radio datacube visualisation</a></li> </ul> </div> <div id="markdown-content"> <h2 id="rendering-hydrodynamical-simulations"> <a class="anchor" href="#rendering-hydrodynamical-simulations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rendering hydrodynamical simulations</h2> <p>I’ve spent part of the past few summers working in collaboration with project students on visualisation pipelines. A lot of this has been built around <a href="https://alejandrobll.github.io/py-sphviewer" rel="external nofollow noopener" target="_blank">py‑sphviewer</a> that is now deprecated, but most of what we’ve learned is quite general and I hope to port it over to another visualisation toolkit in the future.</p> <h3 id="early-attempts"> <a class="anchor" href="#early-attempts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Early attempts</h3> <p>In 2021 I hosted a <a href="https://www.nuffieldresearchplacements.org/" rel="external nofollow noopener" target="_blank">Nuffield research placement</a> with a goal of trying to learn some rudimentary visualisation techniques including stitching together images of simulated galaxies at consecutive times to make videos. py‑sphviewer served as a useful tool to do the actual rendering, but there were some holes to fill in around interpolating between simulation outputs and tracking a target galaxy through time. My student Jared and I figured out some of the basics. Linear interpolation between simulation ‘snapshots’ turns out to be sufficient, provided that the outputs are frequent enough in time. A cubic spline fit through the positions of the target galaxy at times when we had galaxy catalogues available turned out to produce a good trajectory for the ‘camera’. One of our early attempts to render the gas in a dwarf galaxy from the APOSTLE <a class="citation" href="#2016MNRAS.457.1931S">(Sawala et al. 2016)</a> over a few billion years of its evolution looked like this:</p> <figure> <video src="/assets/video/EarlyEvol.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <figcaption class="caption">An early attempt to visualise the gas in a dwarf galaxy. Since we rendered all of the gas in the simulation, we picked up a lot of structure in the background that dominates over the target galaxy early on. There's also an undesirable 'flickering' effect. (J. Turnbull, K. Oman).</figcaption> </figure> <p>We tried truncating a region around the target galaxy to suppress the background structure but this led to anything entering the target region appearing out of thin air. Eventually we solved this by ‘fading out’ towards the edge of the target region with an exponential suppression of the masses of particles close to the boundaries. We also figured out a global smoothly-varying colour scale normalisation to get rid of the flickering. By the end of the summer we managed to produce a video that we were pretty happy with overall:</p> <figure> <video src="/assets/video/CompositeCirc.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <figcaption class="caption">Composite visualisation of the dark matter (grayscale) and gas (purple/yellow) densities in a dwarf galaxy from the APOSTLE simulations. The viewing angle tracks the angular momentum of the gas to keep the disc face-on. (J. Turnbull, K. Oman)</figcaption> </figure> <h3 id="visualisation-driven-science"> <a class="anchor" href="#visualisation-driven-science" aria-hidden="true"><span class="octicon octicon-link"></span></a>Visualisation-driven science</h3> <p>In 2022 Eleanor Downing, then an undergraduate student at Durham, joined for a summer project where we deployed the techniques developed the previous summer on a sample of 33 low-mass galaxies from the APOSTLE suite. One of my goals for the projet was to try a new approach where the visualisations, which are often almost an afterthought in science projects, were instead the first thing to do and would be allowed to drive the process. Eleanor made many versions of movies looking at the gas and dark matter in these galaxies, totalling well over the duration of a feature-length film. Here’s one example:</p> <figure> <video src="/assets/video/FaceCirc.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <video src="/assets/video/EdgeCirc.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <figcaption class="caption">Visualisation of the gas density in a dwarf galaxy from the APOSTLE simulations over the last 4 billion years of its history. The viewing angle is aligned with the angular momentum vector (left) to keep the disc face-on. The right-hand video shows a perpendicular viewing angle so that the disc is seen edge-on. (E. Downing, K. Oman)</figcaption> </figure> <p>She then catalogued ‘by eye’ the various processes that can disturb the gas kinematics in low-mass galaxies - mergers, warps, supernova-driven outflows and so on. We followed this up with a more quantitative analysis guided by the visual classifications to produce the first estimate of the frequencies of each type of perturbation that we identified. My favourite take-away from the project is summarised in Fig. 6 of the resulting paper <a class="citation" href="#2023MNRAS.522.3318D">(Downing &amp; Oman 2023)</a>, showing that even a slightly prolate (rugby ball-shaped) dark matter halo strongly disturbs the gas - there’s no stable configuration for an oblate gas disc in a prolate halo.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/b_a_Q-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/b_a_Q-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/b_a_Q-1400.webp"></source> <img src="/assets/img/b_a_Q.png" class="img-fluid rounded" width="65%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Anticorrelation between DM halo intermediate-to-major axis ratio b/a (measured from reduced inertia tensor of DM particles within a spherical aperture with radius equal to twice the radius enclosing 90 per cent of galaxy's HI mass) and the degree to which the rotation curve traces the circular velocity curve, Q. An aspherical halo (b/a&lt;0.95, marked by the dashed red line) is a strong predictor of poor agreement between the rotation curve and the circular velocity curve, but a spherical halo does not guarantee close agreement. The coloured background marks intervals in Q where the agreement is (left to right) excellent, good, fair and poor.</figcaption> </figure> <p>I assembled one visualisation of each galaxy into the mosaic below. This really captures the diversity of assembly histories and evolutionary processes shaping the gas in these objects in a concise visual snapshot. The full collection of videos is <a href="https://academic.oup.com/mnras/article/522/3/3318/7085003#supplementary-data" rel="external nofollow noopener" target="_blank">published with the paper</a>.</p> <figure> <video src="/assets/video/Mosaic.webm" class="img-fluid rounded" width="90%" height="auto" controls="" muted=""></video> <figcaption class="caption">Visualisation of the gas density in dwarf galaxies from the APOSTLE simulations over the last 4 billion years of their history. The viewing angles are aligned with the angular momenta of the discs to keep them face-on. (E. Downing, K. Oman)</figcaption> </figure> <h4 id="embedding-an-mp4-in-a-pdf-file"> <a class="anchor" href="#embedding-an-mp4-in-a-pdf-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Embedding an <code class="language-plaintext highlighter-rouge">mp4</code> in a <code class="language-plaintext highlighter-rouge">pdf</code> file</h4> <p>While writing the paper, we thought it would be a shame not to include at least one of the movies. We eventually figured out how to embed an <code class="language-plaintext highlighter-rouge">mp4</code> file in a pdf using the snippet of code below (save as <code class="language-plaintext highlighter-rouge">embed_video.tex</code> and use <code class="language-plaintext highlighter-rouge">\input{embed_video}</code> in your latex file, then in a figure environment you can do <code class="language-plaintext highlighter-rouge">\embedvideo*{\includegraphics{placeholderimage.pdf}}{video.mp4}</code> - make sure video is encoded with H.264). We didn’t manage to convince the journal to do this in the version of record, but <a href="https://arxiv.org/abs/2301.05242" rel="external nofollow noopener" target="_blank">it does work on arXiv</a> (for best results download and open with Adobe or Okular pdf viewer).</p> <figure class="highlight"><pre><code class="language-tex" data-lang="tex"><span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="c">% \embedvideo{&lt;poster or text&gt;}{&lt;video file (MP4+H264)&gt;}</span>
<span class="c">% \embedvideo*{...}{...}                     % auto-play</span>
<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="k">\usepackage</span><span class="na">[bigfiles]</span><span class="p">{</span>pdfbase<span class="p">}</span>
<span class="k">\ExplSyntaxOn</span>
<span class="k">\NewDocumentCommand\embedvideo</span><span class="p">{</span>smm<span class="p">}{</span>
  <span class="k">\group</span><span class="p">_</span>begin:
  <span class="k">\leavevmode</span>
  <span class="k">\tl</span><span class="p">_</span>if<span class="p">_</span>exist:cTF<span class="p">{</span>file<span class="p">_</span><span class="k">\file</span><span class="p">_</span>mdfive<span class="p">_</span>hash:n<span class="p">{</span>#3<span class="p">}}{</span>
    <span class="k">\tl</span><span class="p">_</span>set<span class="p">_</span>eq:Nc<span class="k">\video</span><span class="p">{</span>file<span class="p">_</span><span class="k">\file</span><span class="p">_</span>mdfive<span class="p">_</span>hash:n<span class="p">{</span>#3<span class="p">}}</span>
  <span class="p">}{</span>
    <span class="k">\IfFileExists</span><span class="p">{</span>#3<span class="p">}{}{</span><span class="k">\GenericError</span><span class="p">{}{</span>File~`#3'~not~found<span class="p">}{}{}}</span>
    <span class="k">\pbs</span><span class="p">_</span>pdfobj:nnn<span class="p">{}{</span>dict<span class="p">}{</span>/Type/Filespec/F~(#3)/UF~(#3)/EF~&lt;&lt;/F~<span class="k">\pbs</span><span class="p">_</span>pdflastobj:&gt;&gt;<span class="p">}</span>
    <span class="k">\tl</span><span class="p">_</span>set:Nx<span class="k">\video</span><span class="p">{</span><span class="k">\pbs</span><span class="p">_</span>pdflastobj:<span class="p">}</span>
    <span class="k">\tl</span><span class="p">_</span>gset<span class="p">_</span>eq:cN<span class="p">{</span>file<span class="p">_</span><span class="k">\file</span><span class="p">_</span>mdfive<span class="p">_</span>hash:n<span class="p">{</span>#3<span class="p">}}</span><span class="k">\video</span>
  <span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfobj:nnn<span class="p">{}{</span>dict<span class="p">}{</span>
    /Type/RichMediaInstance/Subtype/Video
    /Asset~<span class="k">\video</span>
    /Params~&lt;&lt;/FlashVars (
      source=#3<span class="p">&amp;</span>
      skin=SkinOverAllNoFullNoCaption.swf<span class="p">&amp;</span>
      skinAutoHide=true<span class="p">&amp;</span>
      skinBackgroundColor=0x5F5F5F<span class="p">&amp;</span>
      skinBackgroundAlpha=0
    )&gt;&gt;
  <span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfobj:nnn<span class="p">{}{</span>dict<span class="p">}{</span>
    /Type/RichMediaConfiguration/Subtype/Video
    /Instances~[<span class="k">\pbs</span><span class="p">_</span>pdflastobj:]
  <span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfobj:nnn<span class="p">{}{</span>dict<span class="p">}{</span>
    /Type/RichMediaContent
    /Assets~&lt;&lt;
      /Names~[(#3)~<span class="k">\video</span>]
    &gt;&gt;
    /Configurations~[<span class="k">\pbs</span><span class="p">_</span>pdflastobj:]
  <span class="p">}</span>
  <span class="k">\tl</span><span class="p">_</span>set:Nx<span class="k">\rmcontent</span><span class="p">{</span><span class="k">\pbs</span><span class="p">_</span>pdflastobj:<span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfobj:nnn<span class="p">{}{</span>dict<span class="p">}{</span>
    /Activation~&lt;&lt;
      /Condition/<span class="k">\IfBooleanTF</span><span class="p">{</span>#1<span class="p">}{</span>PV<span class="p">}{</span>XA<span class="p">}</span>
      /Presentation~&lt;&lt;/Style/Embedded&gt;&gt;
    &gt;&gt;
    /Deactivation~&lt;&lt;/Condition/PI&gt;&gt;
  <span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\hbox</span><span class="p">_</span>set:Nn<span class="k">\l</span><span class="p">_</span>tmpa<span class="p">_</span>box<span class="p">{</span>#2<span class="p">}</span>
  <span class="k">\tl</span><span class="p">_</span>set:Nx<span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>wd<span class="p">_</span>tl<span class="p">{</span><span class="k">\dim</span><span class="p">_</span>use:N<span class="k">\box</span><span class="p">_</span>wd:N<span class="k">\l</span><span class="p">_</span>tmpa<span class="p">_</span>box<span class="p">}</span>
  <span class="k">\tl</span><span class="p">_</span>set:Nx<span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>ht<span class="p">_</span>tl<span class="p">{</span><span class="k">\dim</span><span class="p">_</span>use:N<span class="k">\box</span><span class="p">_</span>ht:N<span class="k">\l</span><span class="p">_</span>tmpa<span class="p">_</span>box<span class="p">}</span>
  <span class="k">\tl</span><span class="p">_</span>set:Nx<span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>dp<span class="p">_</span>tl<span class="p">{</span><span class="k">\dim</span><span class="p">_</span>use:N<span class="k">\box</span><span class="p">_</span>dp:N<span class="k">\l</span><span class="p">_</span>tmpa<span class="p">_</span>box<span class="p">}</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfxform:nnnnn<span class="p">{</span>1<span class="p">}{</span>1<span class="p">}{}{}{</span><span class="k">\l</span><span class="p">_</span>tmpa<span class="p">_</span>box<span class="p">}</span>
  <span class="c">%</span>
  <span class="k">\pbs</span><span class="p">_</span>pdfannot:nnnn<span class="p">{</span><span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>wd<span class="p">_</span>tl<span class="p">}{</span><span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>ht<span class="p">_</span>tl<span class="p">}{</span><span class="k">\l</span><span class="p">_</span>box<span class="p">_</span>dp<span class="p">_</span>tl<span class="p">}{</span>
    /Subtype/RichMedia
    /BS~&lt;&lt;/W~0/S/S&gt;&gt;
    /Contents~(embedded~video~file:#3)
    /NM~(rma:#3)
    /AP~&lt;&lt;/N~<span class="k">\pbs</span><span class="p">_</span>pdflastxform:&gt;&gt;
    /RichMediaSettings~<span class="k">\pbs</span><span class="p">_</span>pdflastobj:
    /RichMediaContent~<span class="k">\rmcontent</span>
  <span class="p">}</span>
  <span class="k">\phantom</span><span class="p">{</span>#2<span class="p">}</span>
  <span class="k">\group</span><span class="p">_</span>end:
<span class="p">}</span>
<span class="k">\ExplSyntaxOff</span>
<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></code></pre></figure> <h3 id="non-density-rendering"> <a class="anchor" href="#non-density-rendering" aria-hidden="true"><span class="octicon octicon-link"></span></a>Non-density rendering</h3> <p>In summer 2023 I co-hosted two more Nuffield research placement students, Mathilda and Piotr, both exploring visualisations of fields other than mass density. We worked out how to use the same toolset to render density-weighted properties, such as the density-weighted gas temperature or density-weighted stellar metallicity. Because of the way that the weighting integrates along the line of sight the interpretation of the outputs can be a bit tricky, but we could capture qualitative features like a cold gas disc embedded in a hot atmosphere. Perhaps my favourite visualisation from the summer is the one below. This was created by making three maps of the mass fraction in three hydrogen gas phases (ionized, atomic, molecular) and assigning each to one of the channels of an RGB image, then blending the result with a grayscale total density map to modulate the value (in the sense of HSV).</p> <figure> <video src="/assets/video/DensityCirc.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <video src="/assets/video/PhasesCirc.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <figcaption class="caption">Left: gas density rendering of a simulated galaxy from the APOSTLE simulation suite. Right: same galaxy with rendering colour-coded by hydrogen gas phase - red is ionized, blue is atomic and green is molecular. (M. Hunnisett, I. Santos-Santos, K. Oman)</figcaption> </figure> <p>This visualisation just pans around a static galaxy - there are still some kinks to work out in the process before it will give satisfactory results for a time-evolving galaxy.</p> <h2 id="radio-datacube-visualisation"> <a class="anchor" href="#radio-datacube-visualisation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Radio datacube visualisation</h2> <p>Spectral line observations are intrinsically 3D measurements, though not so intuitively as a density field in a simulation. In these measurements, the telescope measures the intensity of light as a function of position on the sky, giving two spatial coordinates (right ascension and declination), and as a function of wavelength (or frequency), giving a ‘spectral coordinate’. Provided that we define a metric that specifies a mapping between the spatial and spectral units (how many Hz per pixel and how many arcsec per pixel, or something like that) this can be rendered like a more conventional 3D dataset. One example that I created with the <a href="https://doi.org/10.1016/j.ascom.2017.03.004" rel="external nofollow noopener" target="_blank">SlicerAstro</a> extension of <a href="https://www.slicer.org/" rel="external nofollow noopener" target="_blank">3DSlicer</a> is shown below.</p> <figure> <video src="/assets/video/SlicerCapture.webm" class="img-fluid rounded" width="45%" height="auto" autoplay="" loop="" muted=""></video> <figcaption class="caption">Volume rendering of a 3D radio 'datacube'. The cube has two spatial axes corresponding to right ascension and declination, and a velocity axis corresponding to velocity of the hydrogen gas along the line of sight as measured from its Doppler shift. The image rotates through the spatial projection (approximately oval) and the major axis position-velocity diagram projection (approximately diagonal line). The target object is a strongly-warped giant galaxy from the EAGLE simulation suite, 'observed' with my MARTINI code. (K. Oman)</figcaption> </figure> <p>I’ve also had a chance to play with the <a href="https://vislab.idia.ac.za/" rel="external nofollow noopener" target="_blank">IDIA Vislab</a> virtual reality kit, including loading in some simulated radio observations for manipulation in 3D - definitely something I hope to explore further in the future!</p> </div> <hr> </article> <h2>References</h2> <div class="publications"> <h2 class="bibliography">2023</h2> <ol class="bibliography"><li> <div class="row"> <div class="col-sm-2 abbr"></div> <div id="2023MNRAS.522.3318D" class="col-sm-8"> <div class="title">The many reasons that the rotation curves of low-mass galaxies can fail as tracers of their matter distributions</div> <div class="author"> Eleanor R. Downing, and <em>Kyle A. Oman</em> </div> <div class="editor"> </div> <div class="periodical"> (2023) MNRAS<b> 522</b> 3318 </div> <div class="periodical"> </div> <div class="links"> <a class="abstract btn btn-sm z-depth-0" role="button">Abs</a> <a href="https://ui.adsabs.harvard.edu/abs/2023MNRAS.522.3318D" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">ADS</a> <a href="https://arxiv.org/abs/2301.05242" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">arXiv</a> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> <a href="https://doi.org/10.1093/mnras/stad868" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">HTML</a> <a href="/assets/pdf/2023MNRAS.522.3318D.pdf" class="btn btn-sm z-depth-0" role="button">PDF</a> </div> <div class="badges"> </div> <div class="abstract hidden"> <p>It is routinely assumed that galaxy rotation curves are equal to their circular velocity curves (modulo some corrections) such that they are good dynamical mass tracers. We take a visualization- driven approach to exploring the limits of the validity of this assumption for a sample of 33 low-mass galaxies (60 v<sub>max</sub>/km s<sup>-1</sup> 120) from the APOSTLE suite of cosmological hydrodynamical simulations. Only three of these have rotation curves nearly equal to their circular velocity curves at z = 0, the rest are undergoing a wide variety of dynamical perturbations. We use our visualizations to guide an assessment of how many galaxies are likely to be strongly perturbed by processes in several categories: mergers/interactions (affecting 6/33 galaxies), bulk radial gas inflows (19/33), vertical gas outflows (15/33), distortions driven by a non-spherical DM halo (17/33), warps (8/33), and winds due to motion through the intergalactic medium (5/33). Most galaxies fall into more than one of these categories; only 5/33 are not in any of them. The sum of these effects leads to an underestimation of the low-velocity slope of the baryonic Tully-Fisher relation (α ∼3.1 instead of α ∼3.9, where M<sub>bar</sub> ∝ v<sup>α</sup>) that is difficult to avoid, and could plausibly be the source of a significant portion of the observed diversity in low-mass galaxy rotation curve shapes.</p> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">2023MNRAS.522.3318D</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{{Downing}, Eleanor R. and {Oman}, Kyle A.}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{{The many reasons that the rotation curves of low-mass galaxies can fail as tracers of their matter distributions}}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{\mnras}</span><span class="p">,</span>
  <span class="na">keywords</span> <span class="p">=</span> <span class="s">{galaxies: dwarf, galaxies: kinematics and dynamics, dark matter, Astrophysics - Astrophysics of Galaxies}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2023}</span><span class="p">,</span>
  <span class="na">month</span> <span class="p">=</span> <span class="nv">jul</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{522}</span><span class="p">,</span>
  <span class="na">number</span> <span class="p">=</span> <span class="s">{3}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{3318-3336}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1093/mnras/stad868}</span><span class="p">,</span>
  <span class="na">archiveprefix</span> <span class="p">=</span> <span class="s">{arXiv}</span><span class="p">,</span>
  <span class="na">eprint</span> <span class="p">=</span> <span class="s">{2301.05242}</span><span class="p">,</span>
  <span class="na">primaryclass</span> <span class="p">=</span> <span class="s">{astro-ph.GA}</span><span class="p">,</span>
  <span class="na">adsurl</span> <span class="p">=</span> <span class="s">{https://ui.adsabs.harvard.edu/abs/2023MNRAS.522.3318D}</span><span class="p">,</span>
  <span class="na">adsnote</span> <span class="p">=</span> <span class="s">{Provided by the SAO/NASA Astrophysics Data System}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div> </li></ol> <h2 class="bibliography">2016</h2> <ol class="bibliography"><li> <div class="row"> <div class="col-sm-2 abbr"></div> <div id="2016MNRAS.457.1931S" class="col-sm-8"> <div class="title">The APOSTLE simulations: solutions to the Local Group’s cosmic puzzles</div> <div class="author"> <a href="https://blogs.helsinki.fi/sawala/about-me/" rel="external nofollow noopener" target="_blank">Till Sawala</a>, <a href="https://royalsociety.org/people/carlos-frenk-11462/" rel="external nofollow noopener" target="_blank">Carlos S. Frenk</a>, <a href="https://sites.google.com/view/azadehfattahi" rel="external nofollow noopener" target="_blank">Azadeh Fattahi</a>, and <span class="more-authors" title="click to view 13 more authors" onclick=" var element=$(this); element.attr('title', ''); var more_authors_text=element.text() == '13 more authors' ? 'Julio F. Navarro, Richard G. Bower, Robert A. Crain, Claudio Dalla Vecchia, Michelle Furlong, John. C. Helly, Adrian Jenkins, Kyle A. Oman, Matthieu Schaller, Joop Schaye, Tom Theuns, James Trayford, Simon D. M. White' : '13 more authors'; var cursorPosition=0; var textAdder=setInterval(function(){ element.text(more_authors_text.substring(0, cursorPosition + 1)); if (++cursorPosition == more_authors_text.length){ clearInterval(textAdder); } }, '1'); ">13 more authors</span> </div> <div class="editor"> </div> <div class="periodical"> (2016) MNRAS<b> 457</b> 1931 </div> <div class="periodical"> </div> <div class="links"> <a class="abstract btn btn-sm z-depth-0" role="button">Abs</a> <a href="https://ui.adsabs.harvard.edu/abs/2016MNRAS.457.1931S" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">ADS</a> <a href="https://arxiv.org/abs/1511.01098" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">arXiv</a> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> <a href="https://doi.org/10.1093/mnras/stw145" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">HTML</a> <a href="/assets/pdf/2016MNRAS.457.1931S.pdf" class="btn btn-sm z-depth-0" role="button">PDF</a> </div> <div class="badges"> </div> <div class="abstract hidden"> <p>The Local Group galaxies offer some of the most discriminating tests of models of cosmic structure formation. For example, observations of the Milky Way (MW) and Andromeda satellite populations appear to be in disagreement with N-body simulations of the ‘lambda cold dark matter’ (ΛCDM) model: there are far fewer satellite galaxies than substructures in CDM haloes (the ‘missing satellites’ problem); dwarf galaxies seem to avoid the most massive substructures (the ‘too-big-to-fail’ problem); and the brightest satellites appear to orbit their host galaxies on a thin plane (the ‘planes of satellites’ problem). Here we present results from APOSTLE (A Project Of Simulating The Local Environment), a suite of cosmological hydrodynamic simulations of 12 volumes selected to match the kinematics of the Local Group (LG) members. Applying the EAGLE code to the LG environment, we find that our simulations match the observed abundance of LG galaxies, including the satellite galaxies of the MW and Andromeda. Due to changes to the structure of haloes and the evolution in the LG environment, the simulations reproduce the observed relation between stellar mass and velocity dispersion of individual dwarf spheroidal galaxies without necessitating the formation of cores in their dark matter profiles. Satellite systems form with a range of spatial anisotropies, including one similar to the MWs, confirming that such a configuration is not unexpected in ΛCDM. Finally, based on the observed velocity dispersion, size, and stellar mass, we provide estimates of the maximum circular velocity for the haloes of nine MW dwarf spheroidals.</p> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">2016MNRAS.457.1931S</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{{Sawala}, Till and {Frenk}, Carlos S. and {Fattahi}, Azadeh and {Navarro}, Julio F. and {Bower}, Richard G. and {Crain}, Robert A. and {Dalla Vecchia}, Claudio and {Furlong}, Michelle and {Helly}, John. C. and {Jenkins}, Adrian and {Oman}, Kyle A. and {Schaller}, Matthieu and {Schaye}, Joop and {Theuns}, Tom and {Trayford}, James and {White}, Simon D. M.}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{{The APOSTLE simulations: solutions to the Local Group's cosmic puzzles}}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{\mnras}</span><span class="p">,</span>
  <span class="na">keywords</span> <span class="p">=</span> <span class="s">{galaxies: evolution, galaxies: formation, cosmology: theory, Astrophysics - Astrophysics of Galaxies, Astrophysics - Cosmology and Nongalactic Astrophysics}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2016}</span><span class="p">,</span>
  <span class="na">month</span> <span class="p">=</span> <span class="nv">apr</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{457}</span><span class="p">,</span>
  <span class="na">number</span> <span class="p">=</span> <span class="s">{2}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{1931-1943}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1093/mnras/stw145}</span><span class="p">,</span>
  <span class="na">archiveprefix</span> <span class="p">=</span> <span class="s">{arXiv}</span><span class="p">,</span>
  <span class="na">eprint</span> <span class="p">=</span> <span class="s">{1511.01098}</span><span class="p">,</span>
  <span class="na">primaryclass</span> <span class="p">=</span> <span class="s">{astro-ph.GA}</span><span class="p">,</span>
  <span class="na">adsurl</span> <span class="p">=</span> <span class="s">{https://ui.adsabs.harvard.edu/abs/2016MNRAS.457.1931S}</span><span class="p">,</span>
  <span class="na">adsnote</span> <span class="p">=</span> <span class="s">{Provided by the SAO/NASA Astrophysics Data System}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div> </li></ol> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Kyle Oman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with modified <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: September 18, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>